#!/bin/bash
# walset — выбор обоев через rofi → передаёт в walset-backend

WALL_DIR="${HOME}/Wallpapers"   # ← поменяй под свою папку
CWD="$(pwd)"

cd "$WALL_DIR" || exit 1

# Обработка пробелов в именах + иконки (если rofi-icon-theme установлен)
# Если хочешь иконки — установи rofi-emoji или используй emoji в именах
SELECTED_WALL=$(for a in *.jpg *.png; do echo -en "$a\0icon\x1f$a\n" ; done | rofi -dmenu -p "")

# Если ничего не выбрано — выход
[ -z "$SELECTED_WALL" ] && exit 0

# Переходим обратно и запускаем бэкенд
cd "$CWD" || exit 1

# Запуск бэкенда (можно передать полный путь)
walset-backend "$WALL_DIR/$SELECTED_WALL"