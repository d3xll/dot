#!/usr/bin/env bash

LOG_FILE="$HOME/update_checker.log"

# Обновления из репозиториев
pacman_updates=$(checkupdates | wc -l)

# Обновления из AUR
aur_updates=$(yay -Qua | wc -l)

# Сумма
total=$((pacman_updates + aur_updates))

echo "[$NOW] Checked: $total updates (Pacman: $pacman_updates, AUR: $aur_updates)" >> "$LOG_FILE"

# Уведомление
if [[ "$total" -gt 0 ]]; then
    notify-send "󰏖 Updates" "Available: $total packages"
else
    notify-send -u low " All good" "No updates available"
fi